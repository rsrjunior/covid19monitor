(this.webpackJsonpcovid19monitor=this.webpackJsonpcovid19monitor||[]).push([[0],{169:function(e,t,a){e.exports=a(170)},170:function(e,t,a){"use strict";a.r(t);var r=a(140),n=a(75),o=a(76),s=a(48),c=a(79),i=a(80),l=(a(171),a(172),a(173),a(1)),u=a.n(l),d=a(47),m=a.n(d),p=a(8),h=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={error:null,isLoaded:!1,selected_countries:["All"],available_countries:[],grid_class:"pure-u-1"},r.selectCountryRef=u.a.createRef(),r.handleInputCountry=r.handleInputCountry.bind(Object(s.a)(r)),r}return Object(o.a)(a,[{key:"handleCloseCountry",value:function(e){if(this.state.selected_countries.find((function(t){return t===e}))){var t=this.state.selected_countries.filter((function(t){return t!==e})),a=this.state.grid_class;t.length>=3?a="pure-u-1 pure-u-md-1-2 pure-u-lg-1-3":2===t.length?a="pure-u-1 pure-u-md-1-2":1===t.length&&(a="pure-u-1"),this.setState({selected_countries:t,grid_class:a})}}},{key:"componentDidMount",value:function(){var e=this;fetch("https://covid-193.p.rapidapi.com/countries",{method:"GET",headers:{"x-rapidapi-host":"covid-193.p.rapidapi.com","x-rapidapi-key":"c3414d2c8dmshad47f98658f598fp1b458djsn9eb932b014d0"}}).then((function(e){return e.json()})).then((function(t){var a;t.errors?a=t.errors[0]:t.results||(a=new Error("No data found")),e.setState({isLoaded:!0,available_countries:t.results?t.response:null,error:a})})).catch((function(t){e.setState({isLoaded:!0,error:t})}))}},{key:"handleInputCountry",value:function(e){var t=this.selectCountryRef.current,a=t.options[t.selectedIndex].value;if(a&&!this.state.selected_countries.find((function(e){return e===a}))){var r=this.state.selected_countries.slice().concat(a),n=this.state.grid_class;r.length>=3?n="pure-u-1 pure-u-md-1-2 pure-u-lg-1-3":2===r.length&&(n="pure-u-1 pure-u-md-1-2"),this.setState({selected_countries:r,grid_class:n})}}},{key:"render",value:function(){var e=this,t=this.state.selected_countries,a=this.state.grid_class,r=u.a.createElement("div",{className:"box box-addcountry"},"Loading countries..."),n=t.map((function(t){return u.a.createElement("div",{key:t+"Div",className:a},u.a.createElement(f,{key:t+"History",country:t,handleCloseCountry:function(t){return e.handleCloseCountry(t)}}))}));return this.state.isLoaded&&(r=this.state.error?u.a.createElement("div",{className:a},u.a.createElement("div",{className:"box box-addcountry"},"Error while loading available countries: ",this.state.error)):u.a.createElement("div",{className:a},u.a.createElement("div",{className:"box box-addcountry"},u.a.createElement("h2",null,"Add to Monitor"),u.a.createElement("select",{ref:this.selectCountryRef,id:"countrySelector"},this.state.available_countries.map((function(e,t){return u.a.createElement("option",{key:t,value:e},e)}))),u.a.createElement("br",null),u.a.createElement("button",{className:"pure-button button-addcountry",onClick:this.handleInputCountry},"Add")))),u.a.createElement("div",null,u.a.createElement("header",null,"Covid-19 Monitor"),u.a.createElement("div",{className:"pure-g"},n,r))}}]),a}(u.a.Component),f=function(e){Object(i.a)(a,e);var t=Object(c.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={error:null,isLoaded:!1,stats:null,timestamp:null},r}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("https://covid-193.p.rapidapi.com/history?country=".concat(this.props.country),{method:"GET",headers:{"x-rapidapi-host":"covid-193.p.rapidapi.com","x-rapidapi-key":"c3414d2c8dmshad47f98658f598fp1b458djsn9eb932b014d0"}}).then((function(e){return e.json()})).then((function(t){var a=[];t.results&&function(){a.push(t.response[0]);for(var e=new Date(t.response[0].time.substring(0,10)),r=1;r<30;r++){e.setDate(e.getDate()-1);var n=t.response.find((function(t){return t.day===e.toISOString().substring(0,10)}));n&&a.push(n)}a.reverse()}(),e.setState({isLoaded:!0,stats:a,error:t.results?null:new Error("No data found"),timestamp:t.results?t.response[0].time:null})})).catch((function(t){e.setState({isLoaded:!0,error:t})}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.error,n=t.isLoaded,o=t.stats,s=t.timestamp;if(a)return u.a.createElement("div",{className:"box box-history"},"Error: ",a.message);if(n){var c=Object(r.a)(o).map((function(e){return{name:e.day,total:e.cases.total,active:e.cases.active,recovered:e.cases.recovered,deaths:e.deaths.total,critical:e.cases.critical}})),i=u.a.createElement(p.e,{minHeight:125,minWidth:250,aspect:2.5,width:"100%"},u.a.createElement(p.d,{data:c,margin:{top:5,right:30,left:5,bottom:5}},">",u.a.createElement(p.c,{type:"monotone",dataKey:"total",stroke:"#FF5900"}),u.a.createElement(p.c,{type:"monotone",dataKey:"active",stroke:"#A78C04"}),u.a.createElement(p.c,{type:"monotone",dataKey:"recovered",stroke:"#27A704"}),u.a.createElement(p.c,{type:"monotone",dataKey:"deaths",stroke:"#000000"}),u.a.createElement(p.c,{type:"monotone",dataKey:"critical",stroke:"#FF0000"}),u.a.createElement(p.a,{stroke:"#ccc",strokeDasharray:"5 5"}),u.a.createElement(p.g,{dataKey:"name"}),u.a.createElement(p.h,{tickFormatter:function(e){return new Intl.NumberFormat("en-US",{notation:"compact",compactDisplay:"short"}).format(e)}}),u.a.createElement(p.f,null),u.a.createElement(p.b,null)));return u.a.createElement("div",{className:"box box-history"},u.a.createElement("div",{style:{textAlign:"end"}},u.a.createElement("button",{className:"pure-button button-closecountry",onClick:function(t){return e.props.handleCloseCountry(e.props.country)}},"X")),u.a.createElement("h2",null,"All"===this.props.country?"World":this.props.country),i,u.a.createElement("footer",{className:"fetchInfo"},"Data obtained from ",u.a.createElement("a",{href:"https://rapidapi.com/api-sports/api/covid-193"},"api-sports")," at ",new Date(s).toUTCString()))}return u.a.createElement("div",{className:"box box-history"},"Loading...")}}]),a}(u.a.Component);m.a.render(u.a.createElement(u.a.StrictMode,null,u.a.createElement(h,null)),document.getElementById("root"))},173:function(e,t,a){}},[[169,1,2]]]);
//# sourceMappingURL=main.6a39c3e5.chunk.js.map